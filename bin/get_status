#!/bin/sh

ambient_temperature () {
    echo -n " "
    cat /tmp/temper.deg || echo "N/A"
}

mail () {
    mail_notify
}

date_time () {
    date '+%Y-%m-%d %H:%M'
}

network_status () {
   [ $(cat "/sys/class/net/$1/operstate") = "up" ] && echo   || echo 
}

battery_status () {
    STATUS=$(cat "/sys/class/power_supply/$1/status")
    [ $STATUS = "Discharging" ] && echo  || true
    [ $STATUS = "Charging" ] && echo 
    [ $STATUS != "Discharging" ] && [ $STATUS != "Charging" ] && echo 

    cat "/sys/class/power_supply/$1/capacity"
}

empty_space () {
    echo 
    df -h | grep "$1$" | awk '{ print $4 }'
}

[ $(hostname) = 'gilead' ] \
    && echo "$(empty_space /) | $(battery_status BAT0) $(battery_status BAT1) | $(network_status wlp3s0) | $(mail) | $(date_time)" \
    || echo "$(empty_space /) | $(network_status enp2s0) | $(ambient_temperature) | $(mail) | $(date_time)"
